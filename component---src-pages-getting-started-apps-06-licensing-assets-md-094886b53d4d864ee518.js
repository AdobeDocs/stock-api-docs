"use strict";(self.webpackChunkstock_api_docs=self.webpackChunkstock_api_docs||[]).push([[835],{49953:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return l},default:function(){return c}});var n=a(87462),s=a(63366),i=(a(15007),a(64983)),o=a(91515),r=["components"],l={},p={_frontmatter:l},d=o.Z;function c(e){var t=e.components,a=(0,s.Z)(e,r);return(0,i.mdx)(d,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"licensing-assets-and-stuff"},"Licensing assets and stuff","*"),(0,i.mdx)("p",null,"*"," Not a very catchy title, but there's more to this topic than how to get a license! Use the Member/Profile API to check the status of an asset you want to purchase and your current quota, use Content/License to get a license, and download your asset. Also, use the Member/LicenseHistory API to get a list of past purchases."),(0,i.mdx)("a",{id:"licensing-workflow"}),(0,i.mdx)("h2",{id:"licensing-workflow"},"Licensing workflow"),(0,i.mdx)("p",null,"In the previous section, we covered how to hook up the Search API into your application. In this article, we'll cover the Adobe Stock ",(0,i.mdx)("strong",{parentName:"p"},"Content")," and ",(0,i.mdx)("strong",{parentName:"p"},"Member")," methods of the License API. These can get information about a user's licensing (entitlement) status, determine whether the user has an existing license for an asset, request a new license for an asset for that user, get a signed download URL for the asset, and get a history of past licensed assets."),(0,i.mdx)("p",null,"Before you can purchase an asset using the API, there are a few tasks you will want to perform as part of your application flow, and this may trigger multiple decision points depending on your ",(0,i.mdx)("a",{parentName:"p",href:"../02-register-app.md#use-case-matrix"},"use case"),". Like a children's board game, the process is not difficult as long as you understand the rules."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1060px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"36.22641509433963%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/5ce1737612521a14ad69b0f093b2dace/dda86/api-licensing-flow-game.webp 265w","/stock-api-docs/static/5ce1737612521a14ad69b0f093b2dace/010e6/api-licensing-flow-game.webp 530w","/stock-api-docs/static/5ce1737612521a14ad69b0f093b2dace/668f0/api-licensing-flow-game.webp 1060w","/stock-api-docs/static/5ce1737612521a14ad69b0f093b2dace/13d37/api-licensing-flow-game.webp 1504w"],sizes:"(max-width: 1060px) 100vw, 1060px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/5ce1737612521a14ad69b0f093b2dace/28773/api-licensing-flow-game.png 265w","/stock-api-docs/static/5ce1737612521a14ad69b0f093b2dace/a0177/api-licensing-flow-game.png 530w","/stock-api-docs/static/5ce1737612521a14ad69b0f093b2dace/ea60f/api-licensing-flow-game.png 1060w","/stock-api-docs/static/5ce1737612521a14ad69b0f093b2dace/3046c/api-licensing-flow-game.png 1504w"],sizes:"(max-width: 1060px) 100vw, 1060px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/5ce1737612521a14ad69b0f093b2dace/ea60f/api-licensing-flow-game.png",alt:"Licensing Flow board game",title:"Licensing Flow board game",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"142px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"100%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/1403e81f07cc03324f08d9b890fe368a/2daae/Licensing-assets1.webp 142w"],sizes:"(max-width: 142px) 100vw, 142px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/1403e81f07cc03324f08d9b890fe368a/dcb7a/Licensing-assets1.png 142w"],sizes:"(max-width: 142px) 100vw, 142px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/1403e81f07cc03324f08d9b890fe368a/dcb7a/Licensing-assets1.png",alt:"Create access token",title:"Create access token",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"1-get-a-token"}),(0,i.mdx)("h3",{id:"1-get-a-token"},"1. Get a token"),(0,i.mdx)("p",null,"To do any activity involving licensing, you will first need to generate an access token. This is covered in detail in ",(0,i.mdx)("a",{parentName:"p",href:"../03-api-authentication.md"},"Stock API Authentication")," and in the individual OAuth and Service Account ",(0,i.mdx)("a",{parentName:"p",href:"../07-workflow-guides.md"},"workflow guides"),"."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"146px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"50.68493150684932%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/3033189ea6ac4e868c8f337767b3e96d/3197f/Licensing-assets2.webp 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/3033189ea6ac4e868c8f337767b3e96d/4ff47/Licensing-assets2.png 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/3033189ea6ac4e868c8f337767b3e96d/4ff47/Licensing-assets2.png",alt:"Find asset",title:"Find asset",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"2-get-stock-asset-id"}),(0,i.mdx)("h3",{id:"2-get-stock-asset-id"},"2. Get Stock asset ID"),(0,i.mdx)("p",null,'The user starts their journey by getting a file\'s Stock ID (also called "media ID" and "content ID") typically from a search. This was covered in the previous section, and is a key part of any Stock workflow.'),(0,i.mdx)("p",null,"Some important items to note:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Stock IDs are not permanent/static. If you provide a checkout cart for your user, and the user saves the asset to license later, you should not assume that this asset is still available under that lD--you should verify. (See step #4, below.)"),(0,i.mdx)("li",{parentName:"ul"},"Templates and 3D content are more likely to change IDs, because they are updated more often.")),(0,i.mdx)("p",null,"For example, your user wants to license an image of a cute, fluffy kitten (and who wouldn't?) This is an extract of the JSON response from the search request, showing the ID we will need for our next set of operations."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"195px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"74.87179487179488%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/40ec0ed9e74dfa506092b7c933b0203e/798b8/kitten-112670342.webp 195w"],sizes:"(max-width: 195px) 100vw, 195px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/40ec0ed9e74dfa506092b7c933b0203e/0e421/kitten-112670342.jpg 195w"],sizes:"(max-width: 195px) 100vw, 195px",type:"image/jpeg"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/40ec0ed9e74dfa506092b7c933b0203e/0e421/kitten-112670342.jpg",alt:"Cute kitten",title:"Cute kitten",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},'{\n    /*...*/\n    "id": 112670342,\n    "title": "Kitten on white blanket",\n    /*...*/\n}\n')),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"142px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"76.05633802816901%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/96e7dacb593055b7029b67f1f10e7abe/2daae/Licensing-assets4.webp 142w"],sizes:"(max-width: 142px) 100vw, 142px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/96e7dacb593055b7029b67f1f10e7abe/dcb7a/Licensing-assets4.png 142w"],sizes:"(max-width: 142px) 100vw, 142px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/96e7dacb593055b7029b67f1f10e7abe/dcb7a/Licensing-assets4.png",alt:"Check if licensed",title:"Check if licensed",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"3-check-if-licensed"}),(0,i.mdx)("h3",{id:"3-check-if-licensed"},"3. Check if licensed"),(0,i.mdx)("p",null,"It's best practice to check if the item is licensed already. There are two methods for this:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"As part of the search."),"  When you are performing the search in step #2, a convenience method is to add the ",(0,i.mdx)("inlineCode",{parentName:"li"},"is_licensed")," field, which will be set to the license name if that user or organization has licensed this asset.")),(0,i.mdx)("p",null,"The main difference between this search request and the ones discussed in the previous section is that this one must be authenticated with an access token. Note the headers used in this request are the same as the ones used for search, with the addition of the ",(0,i.mdx)("inlineCode",{parentName:"p"},"Authorization")," header. You will use these same headers for all remaining licensing requests."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl "https://stock.adobe.io/Rest/Media/1/Search/Files?locale=en_US&search_parameters%5Bmedia_id%5D=62305369&result_columns%5B%5D=id&result_columns%5B%5D=is_licensed" \\\n  -H "x-api-key: YourApiKeyHere" \\\n  -H "x-product: MySampleApp/1.0" \\\n  -H "authorization: Bearer AccessTokenHere"\n')),(0,i.mdx)("p",null,"Response:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "files": [\n        {\n            "id": 62305369,\n            "is_licensed": "Standard"\n        }\n    ]\n}\n')),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"Using Content/Info.")," If you prefer an explicit method, you can call your first Licensing API request using Content/Info, which has the sole purpose of returning the current license state of an asset for that user (or for that org, if the user belongs to an enterprise).")),(0,i.mdx)("p",null,"Using this method, the API returns a ",(0,i.mdx)("inlineCode",{parentName:"p"},"contents")," object which contains the ID of the asset, and a sub-object ",(0,i.mdx)("inlineCode",{parentName:"p"},"purchase_details")," which lists the purchase state, license type and date."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl "https://stock.adobe.io/Rest/Libraries/1/Content/Info?content_id=62305369&license=Standard" \\\n  -H "x-api-key: YourApiKeyHere" \\\n  -H "x-product: MySampleApp/1.0" \\\n  -H "authorization: Bearer AccessTokenHere"\n')),(0,i.mdx)("p",null,"Response:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "contents": {\n        "62305369": {\n            "content_id": "62305369",\n            "size": "Comp",\n            "purchase_details": {\n                "state": "purchased",\n                "license": "Standard",\n                "date": "2017-11-01 22:57:48"\n            }\n        }\n    }\n}\n')),(0,i.mdx)("p",null,"In both cases, if the asset ",(0,i.mdx)("em",{parentName:"p"},"is")," licensed, then there is nothing else to do but get the URL and download the asset. ",(0,i.mdx)("em",{parentName:"p"},"Proceed to ",(0,i.mdx)("a",{parentName:"em",href:"#6-download-the-file"},"step #6")),"."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"142px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"76.05633802816901%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/c749371e87f12d72056ec250e95081a1/2daae/Licensing-assets5.webp 142w"],sizes:"(max-width: 142px) 100vw, 142px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/c749371e87f12d72056ec250e95081a1/dcb7a/Licensing-assets5.png 142w"],sizes:"(max-width: 142px) 100vw, 142px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/c749371e87f12d72056ec250e95081a1/dcb7a/Licensing-assets5.png",alt:"Is licensing possible",title:"Is licensing possible",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"4-check-if-licensing-is-possible"}),(0,i.mdx)("h3",{id:"4-check-if-licensing-is-possible"},"4. Check if licensing is possible"),(0,i.mdx)("p",null,"Assuming the asset is not already licensed, then you will check to see if it's possible to license this asset. This is to prevent a bad user experience and error if you tried to license the item and it cannot be licensed."),(0,i.mdx)("p",null,"For this step, you will use the ",(0,i.mdx)("strong",{parentName:"p"},"Member/Profile")," API. In addition to checking if the asset can be licensed, this will return the user's quota and also return a localized message about how many credits the license will cost. Getting the quota is useful as you can show that the user has \"X\" number of credits in your application's UI."),(0,i.mdx)("p",null,"For the query string, you will need to provide the Stock ID with the ",(0,i.mdx)("inlineCode",{parentName:"p"},"content_id"),' parameter. Ideally, also provide the license type if it is known (because some assets can have multiple license types); for images the normal default is "Standard." Refer to the ',(0,i.mdx)("a",{parentName:"p",href:"/stock-api-docs/api/12-licensing-reference/"},"Licensing API reference")," for more details. Also, if you want a localized message, also provide the language code."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl "https://stock.adobe.io/Rest/Libraries/1/Member/Profile?content_id=112670342&license=Standard&locale=en_US" \\\n  -H "x-api-key: YourApiKeyHere" \\\n  -H "x-product: MySampleApp/1.0" \\\n  -H "authorization: Bearer AccessTokenHere"\n')),(0,i.mdx)("p",null,"Response:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "available_entitlement": {\n        "quota": 1,\n        "license_type_id": 42,\n        "has_credit_model": false,\n        "has_agency_model": true,\n        "is_cce": true,\n        "full_entitlement_quota": {\n            "standard_credits_quota": 1\n        }\n    },\n    "purchase_options": {\n        "state": "possible",\n        "requires_checkout": false,\n        "message": "This will use your last standard credit."\n    }\n}\n')),(0,i.mdx)("p",null,"In the example, you can see that the ",(0,i.mdx)("inlineCode",{parentName:"p"},"purchase_options.state"),' is "possible," which tells you that licensing can continue. If it is ',(0,i.mdx)("strong",{parentName:"p"},"not")," possible to license, go to ",(0,i.mdx)("a",{parentName:"p",href:"#troubleshooting-licensing-requests"},"Troubleshooting"),", below. Otherwise, continue to the next step."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"146px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"75.34246575342465%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/d051954b422a8a04df1ad9e98b92abd2/3197f/Licensing-assets6.webp 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/d051954b422a8a04df1ad9e98b92abd2/4ff47/Licensing-assets6.png 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/d051954b422a8a04df1ad9e98b92abd2/4ff47/Licensing-assets6.png",alt:"Get a license",title:"Get a license",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"5-license-the-asset"}),(0,i.mdx)("h3",{id:"5-license-the-asset"},"5. License the asset"),(0,i.mdx)("p",null,"Now you will perform the license purchase request using the ",(0,i.mdx)("strong",{parentName:"p"},"Content/License")," API, which will deduct credits from the user or organizational account."),(0,i.mdx)("p",null,"Use the same parameters and headers that you used in the Member/Profile request."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl "https://stock.adobe.io/Rest/Libraries/1/Content/License?content_id=112670342&license=Standard" \\\n  -H "x-api-key: YourApiKeyHere" \\\n  -H "x-product: MySampleApp/1.0" \\\n  -H "authorization: Bearer AccessTokenHere"\n')),(0,i.mdx)("p",null,"Response:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},'{\n    "available_entitlement": {\n        "quota": 0,\n        "license_type_id": 42,\n        "has_credit_model": false,\n        "has_agency_model": true,\n        "is_cce": true,\n        "full_entitlement_quota": {\n            "standard_credits_quota": 1\n        }\n    },\n    "contents": {\n        "112670342": {\n            "content_id": "112670342",\n            "size": "Comp",\n            "purchase_details": {\n                "state": "just_purchased",\n                "license": "Standard",\n                "date": "2017-11-06 02:54:18",\n                "url": "https://stock.adobe.com/Rest/Libraries/Download/112670342/1",\n                "content_type": "image/jpeg",\n                "width": 4256,\n                "height": 2832\n            }, /*...*/\n        }\n    }\n}\n')),(0,i.mdx)("p",null,"The response returns several fields, but the most important for your user is in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"contents.XXXX.purchase_details"),' object (where "XXXX" is the Stock ID). Here you will find the URL you will need to download the asset. In addition, if you want to update your UI, you can get the updated quota value from the response field ',(0,i.mdx)("inlineCode",{parentName:"p"},"available_entitlement.quota"),"."),(0,i.mdx)("br",null),(0,i.mdx)("br",null),"![Download asset](./Licensing-assets7.png)",(0,i.mdx)("a",{id:"6-download-the-file"}),(0,i.mdx)("h3",{id:"6-download-the-file"},"6. Download the file"),(0,i.mdx)("p",null,"Finally, you can download the full asset. Here you will call directly to the URL of the licensed asset that you obtained in the previous step:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "contents": {\n        "112670342": {\n            "purchase_details": {\n                "url": "https://stock.adobe.com/Rest/Libraries/Download/112670342/1",\n            }\n        }\n    }\n}\n')),(0,i.mdx)("p",null,"Note that unlike the other requests, you do ",(0,i.mdx)("em",{parentName:"p"},"not")," include the ",(0,i.mdx)("inlineCode",{parentName:"p"},"Authorization")," header, because that can cause the request to fail. Instead, you pass the access token using the ",(0,i.mdx)("strong",{parentName:"p"},(0,i.mdx)("inlineCode",{parentName:"strong"},"token"))," parameter. The download also requires that your application has the ability to follow a redirect--make sure this option is enabled on your download client."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-http"},"https://stock.adobe.com/Rest/Libraries/Download/112670342/1?token=AccessTokenHere\n")),(0,i.mdx)("p",null,"Response:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-http"},'HTTP/1.1 200 OK\nAccept-Ranges: bytes\nContent-Disposition: attachment; filename="AdobeStock_112670342.jpeg";\nContent-Length: 176164\nContent-Type: image/jpeg\nDate: Mon, 06 Nov 2017 03:18:50 GMT\n')),(0,i.mdx)("a",{id:"follow-the-redirects"}),(0,i.mdx)("h4",{id:"follow-the-redirects"},"Follow the redirects..."),(0,i.mdx)("p",null,"The download URL provided by the Stock API is an alias that may redirect you to the actual location of the file on a cloud-based server. Therefore, your request must follow any redirect from the Stock API server, and output the result to a file."),(0,i.mdx)("p",null,"Curl command line example (",(0,i.mdx)("inlineCode",{parentName:"p"},"-L"),": Follow redirects)"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},"curl -L -o AdobeStock_77438420.jpeg 'https://stock.adobe.com/Rest/Libraries/Download/77438420/1?token=<TOKEN>'\n")),(0,i.mdx)("p",null,"PHP example:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-php"},"$curl = curl_init($download_url);\ncurl_setopt($curl, CURLOPT_FILE, $fp); // output to file\ncurl_setopt($curl, CURLOPT_FOLLOWLOCATION, true); // follow redirects\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n// add other options here as needed\n$result = curl_exec($curl);\n\n$fp = fopen($local_image_file, 'w+');\nfwrite($fp, $result);\nfclose($fp);\n")),(0,i.mdx)("p",null,"This URL will trigger a download of the full asset. If you need a different size of the asset (for images only), you can use the ",(0,i.mdx)("strong",{parentName:"p"},(0,i.mdx)("inlineCode",{parentName:"strong"},"size"))," parameter. See ",(0,i.mdx)("a",{parentName:"p",href:"#qa"},"Q&A"),", below."),(0,i.mdx)("p",null,'Note that the token parameter does not include the word "Bearer" as it does when used as a header.'),(0,i.mdx)("p",null,"And you are done!"),(0,i.mdx)("p",null,"...assuming nothing went wrong. If it did, then continue reading. Also, check out common questions and answers about licensing assets."),(0,i.mdx)("a",{id:"getting-license-history"}),(0,i.mdx)("h2",{id:"getting-license-history"},"Getting license history"),(0,i.mdx)("p",null,"Besides obtaining licenses for new assets (Content/License) or checking your credit quota (Member/Profile), another common use for the License API is to access your past history of purchases. This is done using the ",(0,i.mdx)("strong",{parentName:"p"},"Member/LicenseHistory")," API. The format for this request is almost exactly the same as for other licensing methods, except that the result resembles a search request, even supporting pagination (if you have a lot of licensed assets)."),(0,i.mdx)("p",null,"In this example, license history is being requested for this account and the response is being limited to 1 file result (although 3 assets have been licensed), using the ",(0,i.mdx)("inlineCode",{parentName:"p"},"search_parameters[limit]")," query command."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl "https://stock.adobe.io/Rest/Libraries/1/Member/LicenseHistory?search_parameters%5Blimit%5D=1" \\\n  -H "x-api-key: YourApiKeyHere" \\\n  -H "x-product: MySampleApp/1.0" \\\n  -H "authorization: Bearer AccessTokenHere"\n')),(0,i.mdx)("p",null,"Result:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "nb_results": 3,\n    "files": [\n        {\n            "license": "Standard",\n            "license_date": "11/6/17, 2:54 AM",\n            "download_url": "https://stock.adobe.com/Download/DownloadFileDirectly/ikMRKBPqHDrtTifHkbbxGfKhIGVQPw6y",\n            "id": 112670342,\n            "title": "Kitten on white blanket",\n            "creator_name": "byrdyak",\n            "creator_id": 202614441,\n            "content_url": "https://stock.adobe.com/Rest/stock-photo/kitten-on-white-blanket/112670342",\n            "media_type_id": 1,\n            "vector_type": null,\n            "content_type": "image/jpeg",\n            "height": 2832,\n            "width": 4256,\n            "details_url": "https://stock.adobe.com/112670342?as_channel=affiliate&as_source=api&as_content=b4e3ee08719247cc85e9ba92970b1028"\n        }\n    ]\n}\n')),(0,i.mdx)("p",null,"Notice that one of the fields returned is the download URL, making this a convenience method if you want your users to be able to re-download an asset they have previously licensed. Downloading the asset again does not trigger a new license request. Even though the format is slightly different, you would still use this download URL with a ",(0,i.mdx)("inlineCode",{parentName:"p"},"token=<access token>")," parameter."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-http"},"https://stock.adobe.com/Download/DownloadFileDirectly/ikMRKBPqHDrtTifHkbbxGfKhIGVQPw6y?token=AccessTokenHere\n")),(0,i.mdx)("p",null,"Note that ",(0,i.mdx)("em",{parentName:"p"},"by default")," the License History API does not return ",(0,i.mdx)("em",{parentName:"p"},"all")," history for the organization, but only for the current user and/or Stock profile. For example, if your Enterprise organization has 30 profiles (i.e., Product License Configurations, or PLCs) and you call this API, you will only get back the license history for one of the 30 profiles. The current profile is either determined by which profile you have selected in the Adobe Stock website, or by which Enterprise service account is associated with that profile--see the ",(0,i.mdx)("a",{parentName:"p",href:"/stock-api-docs/Service-Account-API-workflow.pdf"},"Enterprise service account")," workflow guide for more information."),(0,i.mdx)("p",null,"To retrieve all the license history across all profiles, use the command ",(0,i.mdx)("inlineCode",{parentName:"p"},"all=true"),". Example:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl "https://stock.adobe.io/Rest/Libraries/1/Member/LicenseHistory?all=true" \\\n  -H "x-api-key: YourApiKeyHere" \\\n  -H "x-product: MySampleApp/1.0" \\\n  -H "authorization: Bearer AccessTokenHere"\n')),(0,i.mdx)("p",null,"Visit the ",(0,i.mdx)("a",{parentName:"p",href:"/stock-api-docs/api/13-license-history.md"},"License history API reference")," for more information."),(0,i.mdx)("a",{id:"next-steps"}),(0,i.mdx)("h2",{id:"next-steps"},"Next steps"),(0,i.mdx)("p",null,"You have completed the Adobe Stock API getting started guide."),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"If you want more detail on anything you have read thus far, explore the ",(0,i.mdx)("a",{parentName:"li",href:"/stock-api-docs/api/"},"API reference documentation"),"."),(0,i.mdx)("li",{parentName:"ul"},"If you are ready to get started in earnest, browse our ",(0,i.mdx)("a",{parentName:"li",href:"/stock-api-docs/getting-started/08-sample-code-sdks.md"},"sample code and SDKs"),".")),(0,i.mdx)("a",{id:"troubleshooting-licensing-requests"}),(0,i.mdx)("h2",{id:"troubleshooting-licensing-requests"},"Troubleshooting licensing requests"),(0,i.mdx)("p",null,"In most cases, everything should happen as outlined above. But if it doesn't, you need to know how to diagnose the issue and correct it."),(0,i.mdx)("a",{id:"memberprofile-issues"}),(0,i.mdx)("h3",{id:"memberprofile-issues"},"Member/Profile issues"),(0,i.mdx)("p",null,"In step #4 above, we used Member/Profile to check if licensing was possible. But what if it was not possible?"),(0,i.mdx)("p",null,"In that case, we would have seen a JSON response message like this:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'    "purchase_options": {\n        "state": "not_possible",\n    }\n')),(0,i.mdx)("p",null,"If this happens, you can build some checks into your application."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"142px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"76.05633802816901%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/a0e4f193ef6debe62e0fe0242650ffac/2daae/Licensing-assets8.webp 142w"],sizes:"(max-width: 142px) 100vw, 142px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/a0e4f193ef6debe62e0fe0242650ffac/dcb7a/Licensing-assets8.png 142w"],sizes:"(max-width: 142px) 100vw, 142px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/a0e4f193ef6debe62e0fe0242650ffac/dcb7a/Licensing-assets8.png",alt:"Premium or Video asset",title:"Premium or Video asset",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"problem-asset-type-cant-be-licensed"}),(0,i.mdx)("h4",{id:"problem-asset-type-cant-be-licensed"},"Problem: Asset type can't be licensed"),(0,i.mdx)("p",null,"First, check the type of asset you are licensing and compare that to what you are allowed to license. One of the most common situations is that you are trying to license a Premium or Video asset, which you might not be allowed to license under a standard image subscription. For a better understanding of asset types and how to license them, see the ",(0,i.mdx)("a",{parentName:"p",href:"https://stock.adobe.com/plans#get-credits"},"Adobe Stock plans"),' page. Note that even if you plan only includes images, you may still be able to license the asset if Adobe has a payment instrument (such as a credit card) on file. In that case, the state will be "overage" instead of "not_possible."'),(0,i.mdx)("p",null,"You will see this message if the asset is Premium or Video, and your plan does not include this content:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "available_entitlement": null,\n    "member": {\n        "stock_id": 43289915\n    },\n    "purchase_options": {\n        "state": "not_possible",\n        "message": "You cannot license this type of asset with your standard credits quota. Please contact your administrator to upgrade your current plan."\n    }\n}\n')),(0,i.mdx)("p",null,"While the message above does not tell you what type of asset this is, you can get this from the search result you performed in step #2, above, if you request the content_type and premium_level_id response fields."),(0,i.mdx)("p",null,"If the premium level is not 0 (standard), then it's possible your plan does not cover it."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "nb_results": 1,\n    "files": [\n        {\n            "id": 124287454,\n            "title": "Kitten Peeking Through Barn Doors; Steinbach, Manitoba, Canada",\n            "content_type": "image/jpeg",\n            "premium_level_id": 3\n        }\n    ]\n}\n')),(0,i.mdx)("p",null,"Video assets could have a premium_level of 0, but simply because the content type is video (e.g., ",(0,i.mdx)("inlineCode",{parentName:"p"},"video/quicktime"),", ",(0,i.mdx)("inlineCode",{parentName:"p"},"video/mp4"),", etc.), realize that you must have credits to license it."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "nb_results": 1,\n    "files": [\n        {\n            "id": 121222021,\n            "title": "Christmas kitten meows",\n            "content_type": "video/quicktime",\n            "premium_level_id": 0\n        }\n    ]\n}\n')),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"146px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"50.68493150684932%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/599602c1b887206769a539cef4d26c7c/3197f/Licensing-assets9.webp 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/599602c1b887206769a539cef4d26c7c/4ff47/Licensing-assets9.png 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/599602c1b887206769a539cef4d26c7c/4ff47/Licensing-assets9.png",alt:"Purchase credits",title:"Purchase credits",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"solution-purchase-universal-credits-or-upgrade-your-plan"}),(0,i.mdx)("h4",{id:"solution-purchase-universal-credits-or-upgrade-your-plan"},"Solution: Purchase universal credits or upgrade your plan"),(0,i.mdx)("p",null,"If you do not belong to an enterprise entitlement, the solution is easy: go to ",(0,i.mdx)("a",{parentName:"p",href:"https://stock.adobe.com/plans"},"Adobe Stock plans")," and purchase a universal credit pack. You can still use your image credits for standard images, templates and 3D, and reserve your new credits for special assets."),(0,i.mdx)("p",null,"If you ",(0,i.mdx)("em",{parentName:"p"},"do")," belong to an enterprise organization, you will need to contact your Adobe sales team for options."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"142px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"76.05633802816901%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/8ffbe051261c86bd81d3a1041e0790d2/2daae/Licensing-assets10.webp 142w"],sizes:"(max-width: 142px) 100vw, 142px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/8ffbe051261c86bd81d3a1041e0790d2/dcb7a/Licensing-assets10.png 142w"],sizes:"(max-width: 142px) 100vw, 142px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/8ffbe051261c86bd81d3a1041e0790d2/dcb7a/Licensing-assets10.png",alt:"alt_text",title:"alt_text",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"problem-no-credits-or-not-enough-credits"}),(0,i.mdx)("h4",{id:"problem-no-credits-or-not-enough-credits"},"Problem: No credits or not enough credits"),(0,i.mdx)("p",null,"The next most common scenario is that you don't have enough credits in your account. Situations where this may occur:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("em",{parentName:"li"},"All credits have been used up.")," This is indicated by a ",(0,i.mdx)("inlineCode",{parentName:"li"},"available_entitlement.quota")," property value of 0."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("em",{parentName:"li"},"The asset you want to license requires more credits than you have.")," As mentioned above, Premium and Video assets cannot be licensed using standard image credits--they require universal credits, or an on-demand purchase separate from your subscription. Furthermore, the price per asset is greater than one credit. As seen on the ",(0,i.mdx)("a",{parentName:"li",href:"https://stock.adobe.com/plans"},"Adobe Stock plans")," page, these assets could range from 2 credits up to 50 credits each.")),(0,i.mdx)("p",null,"In both cases, if ",(0,i.mdx)("inlineCode",{parentName:"p"},"purchase_options.requires_checkout")," is ",(0,i.mdx)("inlineCode",{parentName:"p"},"true")," but licensing is not possible, then you will need to take actions on your account to add more credits. This combination of values means that you cannot license at this time via the API, but may be able to if you correct the issue."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "available_entitlement": {\n        "quota": 0,\n        "full_entitlement_quota": {\n            "standard_credits_quota": 0\n        }\n    },\n    "purchase_options": {\n        "state": "not_possible",\n        "requires_checkout": true,\n        "message": "You don\'t have enough standard credits to license this asset. Please contact your administrator to add more standard credits to your account."\n    }\n}\n')),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"146px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"75.34246575342465%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/44adb6b8f429e846cbcc592eb71df58c/3197f/Licensing-assets11.webp 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/44adb6b8f429e846cbcc592eb71df58c/4ff47/Licensing-assets11.png 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/44adb6b8f429e846cbcc592eb71df58c/4ff47/Licensing-assets11.png",alt:"Add credits to PLC",title:"Add credits to PLC",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"solution-enterprise-add-quota-to-your-plc"}),(0,i.mdx)("h4",{id:"solution-enterprise-add-quota-to-your-plc"},"Solution (enterprise): Add quota to your PLC"),(0,i.mdx)("p",null,"If you belong to an enterprise organization and you need more credits than you have available, you can simply add additional quota in your product license configuration (PLC). This is done by your account administrator, as described in the ",(0,i.mdx)("a",{parentName:"p",href:"../07-workflow-guides.md"},"Service Account workflow guide"),", or ",(0,i.mdx)("a",{parentName:"p",href:"https://helpx.adobe.com/enterprise/help/adobe-stock-enterprise.html#Updateaproductconfigurationsdownloadlimit"},"documented here"),". Enterprise customers can add more quota than they have available, and those extra credits will be charged back at a later date."),(0,i.mdx)("p",null,"One reason enterprises may want to intentionally limit their PLC is if each department is given a separate quota. A quota limit allows the administrator to force the department to request more quota if it goes over its limit."),(0,i.mdx)("p",null,"Note that admins can only add more credits for the type of assets they have agreed to license, per their contract. For example, if a contract only has standard image credits, the administrator cannot add universal credits for Premium or Video assets. In this case, the Adobe sales team must be contacted."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"146px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"50.68493150684932%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/599602c1b887206769a539cef4d26c7c/3197f/Licensing-assets9.webp 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/599602c1b887206769a539cef4d26c7c/4ff47/Licensing-assets9.png 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/599602c1b887206769a539cef4d26c7c/4ff47/Licensing-assets9.png",alt:"Purchase credits",title:"Purchase credits",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"solution-non-enterprise-buy-credits-or-save-payment-info"}),(0,i.mdx)("h4",{id:"solution-non-enterprise-buy-credits-or-save-payment-info"},"Solution (non-enterprise): Buy credits or save payment info"),(0,i.mdx)("p",null,"You need credits to purchase licenses, whether those are standard image credits or universal credits. If you do not belong to an enterprise org, you can get a subscription or credit pack from ",(0,i.mdx)("a",{parentName:"p",href:"https://stock.adobe.com/plans"},"Adobe Stock plans"),'. Alternatively, if you keep a payment method on file (such as a credit card or PayPal account), it\'s possible that the API can automatically deduct the funds. In this case, the state in the Member/Profile response will be "overage."'),(0,i.mdx)("p",null,"Note that some assets (such as some Creative Cloud templates) are free, and do not require a subscription or credits as long as you are a non-enterprise user."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"146px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"50.68493150684932%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/30791490c92efc7624761554623df705/3197f/Licensing-assets13.webp 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/stock-api-docs/static/30791490c92efc7624761554623df705/4ff47/Licensing-assets13.png 146w"],sizes:"(max-width: 146px) 100vw, 146px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/stock-api-docs/static/30791490c92efc7624761554623df705/4ff47/Licensing-assets13.png",alt:"Contact Support",title:"Contact Support",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("a",{id:"solution-look-further-or-get-help"}),(0,i.mdx)("h4",{id:"solution-look-further-or-get-help"},"Solution: Look further or get help"),(0,i.mdx)("p",null,"In the unlikely case where you do have credits ",(0,i.mdx)("em",{parentName:"p"},"and")," licensing is possible, then something else may be happening. Use the ",(0,i.mdx)("a",{parentName:"p",href:"https://www.getpostman.com/"},"Postman")," or ",(0,i.mdx)("a",{parentName:"p",href:"https://curl.haxx.se/"},"curl")," tools to verify that your application is not getting bad or stale data (for example, it is caching previous responses), and the Adobe Stock API is not returning a 400 error (see below)."),(0,i.mdx)("p",null,"If none of those things are happening, then contact ",(0,i.mdx)("a",{parentName:"p",href:"https://helpx.adobe.com/support.html#/product/stock"},"Adobe Stock Support"),". Note that this support channel is for Stock customers. If you are a developer working on an application, contact the ",(0,i.mdx)("a",{parentName:"p",href:"mailto:stockapis@adobe.com?subject=%5BAdobe%20I%2FO%5D%20Stock%20API%20help"},"Stock API team")," for further direction."),(0,i.mdx)("a",{id:"other-problems"}),(0,i.mdx)("h3",{id:"other-problems"},"Other problems"),(0,i.mdx)("p",null,"In the previous cases, Member/Profile and the other APIs will return a valid 200 response. But in the cases below, you will get a 400 error. Here are a couple common reasons, but see more in the ",(0,i.mdx)("a",{parentName:"p",href:"../../01-getting-started.md"},"Stock API reference")," section."),(0,i.mdx)("a",{id:"wrong-license-type"}),(0,i.mdx)("h4",{id:"wrong-license-type"},"Wrong license type"),(0,i.mdx)("p",null,'You can get this error if you try to license an asset with a mismatched license type. For example, Images, 3D and Templates allow a "Standard" license, but Videos have valid licenses of "Video_HD" and "Video',"_",'4K." If you do not specify one of those values for a video, you will get this error.'),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "error": "The license \\"Standard\\" does not match type of content #121222021",\n    "code": "020",\n    "case": "pkx2JXqL7ePdNCXAewS2R7U0PvF27KND"\n}\n')),(0,i.mdx)("a",{id:"expired-or-invalid-token"}),(0,i.mdx)("h4",{id:"expired-or-invalid-token"},"Expired or invalid token"),(0,i.mdx)("p",null,'As a best practice, your user should have to sign in for each session, or if you are using an enterprise application, it should request a new token. Access tokens have a 24-hour expiration, so unless you use a refresh token or unless your user told the Adobe sign-in screen to "remember me," it is expected that the token will expire after a fixed amount of time.'),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "error_code": "401013",\n    "message": "Oauth token is not valid"\n}\n')),(0,i.mdx)("a",{id:"qa"}),(0,i.mdx)("h2",{id:"qa"},"Q&A"),(0,i.mdx)("a",{id:"can-i-find-out-how-many-credits-are-remaining"}),(0,i.mdx)("h4",{id:"can-i-find-out-how-many-credits-are-remaining"},"Can I find out how many credits are remaining?"),(0,i.mdx)("p",null,"Yes, from the ",(0,i.mdx)("strong",{parentName:"p"},"Member/Profile")," API. You can either call a specific ID and license type, or leave off those parameters."),(0,i.mdx)("p",null,"Note that if you do include the content_id in your request and you have more than one type of credit (e.g., standard image credits and universal credits), the ",(0,i.mdx)("inlineCode",{parentName:"p"},"available_entitlement.quota")," value will reflect the credits available ",(0,i.mdx)("em",{parentName:"p"},"for that type of asset"),". For example, if you are querying about a video, then you will get back the number of credits available for Video and Premium content."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl "https://stock.adobe.io/Rest/Libraries/1/Member/Profile?locale=en_US" \\\n  -H "x-api-key: YourApiKeyHere" \\\n  -H "x-product: MySampleApp/1.0" \\\n  -H "authorization: Bearer AccessTokenHere"\n')),(0,i.mdx)("p",null,"Response:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "available_entitlement": {\n        "quota": 3,\n        "license_type_id": 16,\n        "has_credit_model": true,\n        "has_agency_model": false,\n        "is_cce": true,\n        "full_entitlement_quota": {\n            "credits_quota": 3\n        }\n    },\n    "member": {\n        "stock_id": 41003529\n    },\n    "purchase_options": {\n        "state": "possible",\n        "requires_checkout": false,\n        "message": "This will use 1 of your 3 credits."\n    }\n}\n')),(0,i.mdx)("a",{id:"how-can-i-tell-if-the-user-has-an-enterprise-entitlement"}),(0,i.mdx)("h4",{id:"how-can-i-tell-if-the-user-has-an-enterprise-entitlement"},"How can I tell if the user has an enterprise entitlement?"),(0,i.mdx)("p",null,"In general, if you are a ",(0,i.mdx)("em",{parentName:"p"},"member")," of an Adobe Enterprise customer you will realize this, however, if you are a partner using an OAuth integration, you may not know in advance what kind of user is signing in. For example, you may want to identify and target enterprise users differently than regular users."),(0,i.mdx)("p",null,"This can also be done using the ",(0,i.mdx)("strong",{parentName:"p"},"Member/Profile")," API. In the previous example, the property ",(0,i.mdx)("inlineCode",{parentName:"p"},"available_entitlement.is_cce")," will be ",(0,i.mdx)("strong",{parentName:"p"},"true")," if the user has an enterprise Stock entitlement."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'        "is_cce": true,\n')),(0,i.mdx)("p",null,'One thing to note is that Adobe Stock does not have enterprise "accounts" but rather enterprise "entitlements." The point is that a user may be signed in with a free Creative Cloud account, but still be assigned to an account which has enterprise Stock entitlements. That same user may also have a personal (non-enterprise) subscription to Creative Cloud applications. It is best to use the term "entitlement" rather than "account" when dealing with enterprises at Adobe.'),(0,i.mdx)("a",{id:"is-it-possible-to-get-an-image-in-different-size"}),(0,i.mdx)("h4",{id:"is-it-possible-to-get-an-image-in-different-size"},"Is it possible to get an image in different size?"),(0,i.mdx)("p",null,"When you license an image, you license the full/original size of the asset. However, there are times when you need a smaller size, for example to include in a social media post or email."),(0,i.mdx)("p",null,"The Stock API has a command for this situation. Simply add a ",(0,i.mdx)("strong",{parentName:"p"},(0,i.mdx)("inlineCode",{parentName:"strong"},"size="))," parameter to the download URL, and Adobe Stock will return the ",(0,i.mdx)("em",{parentName:"p"},"next larger")," size. The actual size returned depends on the original size of the asset; see the ",(0,i.mdx)("a",{parentName:"p",href:"#"},"Licensing API reference")," for more details."),(0,i.mdx)("p",null,"Example: You want a 400px image for your page."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-http"},"https://stock.adobe.io/Rest/Libraries/Download/112670342/1?size=400&token=AccessTokenHere\n")),(0,i.mdx)("p",null,"Two things to note about this command:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"You cannot request any arbitrary size. Currently, the supported sizes are ",(0,i.mdx)("strong",{parentName:"li"},"400, 800, 1600, 2400, 3100, and 5000"),"."),(0,i.mdx)("li",{parentName:"ul"},"If the asset doesn't have the requested size because the original was not high enough resolution, Stock API will return the max available size.")),(0,i.mdx)("a",{id:"how-can-i-test-licensing-assets-if-i-do-not-have-an-adobe-stock-plan-or-contract"}),(0,i.mdx)("h4",{id:"how-can-i-test-licensing-assets-if-i-do-not-have-an-adobe-stock-plan-or-contract"},"How can I test licensing assets if I do not have an Adobe Stock plan or contract?"),(0,i.mdx)("p",null,"If you are an independent developer or student, you can follow the ",(0,i.mdx)("a",{parentName:"p",href:"../07-workflow-guides.md"},"Affiliate workflow")," and sign up for an API key. If you want to also test licensing an asset, you can test it on a free asset like one of our great ",(0,i.mdx)("a",{parentName:"p",href:"https://stock.adobe.com/templates"},"Creative Cloud Stock templates")," (not all templates are free, but many are)."),(0,i.mdx)("p",null,"However, if you are interested in partnering with Adobe Stock and have a legitimate reason for a demo account, ",(0,i.mdx)("a",{parentName:"p",href:"mailto:Grp-AdobeStockPartnerships@adobe.com?subject=%5BAdobe%20I%2FO%5D%20Stock%20demo%20account%20access"},"contact us"),"."),(0,i.mdx)("a",{id:"how-do-i-license-assets-more-than-once"}),(0,i.mdx)("h4",{id:"how-do-i-license-assets-more-than-once"},"How do I license assets more than once?"),(0,i.mdx)("p",null,"This is a special case for Print on Demand retailers, as described in the ",(0,i.mdx)("a",{parentName:"p",href:"../07-workflow-guides.md"},"Service Account workflow"),". One of the requirements for print retailers in this use case is that they must license an asset for each application of the photo in a printable good. For example, if a customer purchases a key chain and a t-shirt of the same image, the retailer would make two license requests. Because the default behavior of Content/License is that a new license will ",(0,i.mdx)("em",{parentName:"p"},"not")," be used, applications in this use case must use a command to force Adobe Stock to issue a new license."),(0,i.mdx)("p",null,"To notify Adobe Stock to license an asset again, use the ",(0,i.mdx)("inlineCode",{parentName:"p"},"license_again=true")," parameter."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl "https://stock.adobe.io/Rest/Libraries/1/Content/License?content_id=112670342&license=Standard&license_again=true" \\\n  -H "x-api-key: YourApiKeyHere" \\\n  -H "x-product: MySampleApp/1.0" \\\n  -H "authorization: Bearer AccessTokenHere"\n')))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-getting-started-apps-06-licensing-assets-md-094886b53d4d864ee518.js.map